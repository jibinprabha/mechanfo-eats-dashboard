import{r as s,a as g,u as j,j as e,C as v}from"./index-DkupAPWA.js";import{l as N,i as y}from"./Login-CqanfFfu.js";const E=()=>{const[n,d]=s.useState(""),{state:m}=g(),[b,l]=s.useState(!1),[S,o]=s.useState(!1),[u,a]=s.useState(!1),[h,i]=s.useState("");let c=m.phone;const f={phone:c,otp:n},x=j(),p=async r=>{r.preventDefault(),c.length<6?a(!0):(a(!1),l(!0),o(!0),await y.post("/admin/verifyOtpAdmin",f).then(t=>{t.data.status==="error"?(a(!0),i("Invalid OTP")):(localStorage.setItem("isAuthenticated",!0),localStorage.setItem("accessToken",t.data.token),localStorage.setItem("refreshToken",t.data.refreshToken),localStorage.setItem("user",JSON.stringify(t.data.user)),x("/"),l(!1),o(!1))}).catch(t=>{a(!0),i("Invalid OTP"),console.error("Something went wrong!!!",t)}))};return e.jsx(v,{style:{minWidth:"100%"},children:e.jsx("section",{children:e.jsx("div",{className:"row justify-content-center",children:e.jsxs("div",{className:"col-lg-4 col-md-6 d-flex flex-column align-items-center justify-content-center",children:[e.jsx("div",{className:"d-flex justify-content-center py-4",children:e.jsx("a",{href:"index.html",className:"logo d-flex align-items-center w-auto",children:e.jsx("img",{src:N,alt:""})})}),e.jsx("div",{className:"card mb-3",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"pt-4 pb-2 mb-3 mt-3",children:[e.jsx("h5",{className:"card-title text-center pb-0 fs-4",children:"Verify OTP"}),e.jsx("p",{className:"text-center small",children:"Enter your registered number to login"})]}),e.jsxs("form",{className:"row g-3 needs-validation",onSubmit:p,children:[e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"input-group has-validation",children:[e.jsx("input",{type:"text",value:n,onChange:r=>{d(r.target.value)},name:"phone",className:"form-control",id:"phone",required:"",placeholder:"OTP"}),e.jsx("div",{className:`invalid-feedback ${u?"d-block":""}`,children:h})]})}),e.jsx("div",{className:"col-12 login-button",children:e.jsx("button",{className:"btn btn-primary",type:"submit",children:"Verify OTP"})})]})]})})]})})})})};export{E as default};
